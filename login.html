
<html lang="en">
<head>
    <title>湖北大学内部贴吧</title>
    <link href="css/login.css" rel="stylesheet" />
    <link href="css/huda.css?v=1.1.0" rel="stylesheet" />

</head>
<body class="login sidebar-collapse">
    <div class="page-header" filter-color="orange">
        <div class="page-header-image" style="background-image:url(images/login.jpg)"></div>
        <div class="container">
            <div class="col-md-4 content-center">
                <div class="card card-login card-plain">
                    <form class="form" method="" action="">
                        <div class="header header-primary text-center">
                            <div class="logo-container">
                                <img src="images/now-logo-1.png" alt="">
                            </div>
                        </div>
                        <div class="content">
                            <div class="input-group form-group-no-border input-lg">
                                <span class="input-group-addon">
                                    <i class="now-ui-icons users_circle-08"></i>
                                </span>
                                <input id="username" type="text" class="form-control" placeholder="用户名">
                            </div>
                            <div class="input-group form-group-no-border input-lg">
                                <span class="input-group-addon">
                                    <i class="now-ui-icons text_caps-small"></i>
                                </span>
                                <input id="password" type="text" placeholder="密码" class="form-control" />
                            </div>
                        </div>
                        <div id="btn3" class="footer text-center">
                            <a  href="#pablo" class="btn btn-primary btn-round btn-lg btn-block" id="login">登录</a>
                        </div>
  
                    </form>
                </div>
            </div>
        </div>
       
    </div>
</body>

<script src="jquery.min.js"></script>
<script src="jquery.cookie.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        // 请求登录
        $("#btn3").click(function () {
            const username = $("#username").val();
            const password = $("#password").val();
            //请求参数
            const list = {password: password, username: username};
            $.ajax({
                //请求方式
                type: "POST",
                //请求的媒体类型
                contentType: "application/json",
                //请求地址
                url: "http://localhost:8888/userInfo/login",
                //数据，json字符串
                data: JSON.stringify(list),
                //请求成功
                success: function (result) {
                    console.log(result);
                    if  (result===1) {
                        $('#login').html("登录成功");
                        window.location.href="main.html";
                        setCookie("uname",username)
                    }
                    if (result===2) {
                        $('#login').html("该用户名未注册");
                    }
                else{
                        $('#login').html("密码错误");
                    }

                },
                //请求失败，包含具体的错误信息
                error: function (e) {
                    console.log(e.status);
                    console.log(e.responseText);
                }
            });
            function setCookie(cname,cvalue) {
                var d=new Date();
                d.setTime(d.getTime()+7*24*60*60*1000);
                var expires="expires="+d.toGMTString();
                document.cookie=cname+"="+cvalue+";"+expires;
            }
            function getCookie(cname){
                var name=cname+"=";
                var ca=document.cookie.split(';');
                for (var i=0;i<ca.length;i++){
                    var c=ca[i].trim();
                    if(c.indexOf(name)==0){
                        return c.substring(name.length,c.length);
                    }
                }
            }
        });
    });
</script>
</html>