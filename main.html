<!doctype html>
<html lang="en">
	<head>
        <meta charset="utf-8">
        <link rel ="stylesheet" href="css/bootstrap.css" >
<!-- Main CSS -->
    <style>
        body{
            background: url("images/cloud.jpg") no-repeat;
            background-size: cover;
            width: 100%;
            height: 100%;
        }
        *{
            padding: 0;
            margin: 0;
        }
        /*标题样式*/
        .heaBac{
            width: 90%;
            height: 100px;
            margin: auto;
        }
        /*主盒子*/
        .mainBox {
            position: absolute;
            width:80%;
            top: 60px;
            left: 150px;
            height: 600px;
            border-radius: 10px;
        }
        /*主导航*/
        .MainNavigation{
            position: relative;
            width: 60%;
            height: 50px;
            top: 60px;
            left: 280px;

        }
        .MainNavigation ul {
            list-style: none;
        }
        .nav-link{
            display: block;
            width: 16%;
            height: 50px;
            line-height: 50px;
            text-align: center;
            float: left;
            color:black;
            font-size: 20px;
            text-decoration:none;
            border-radius: 5px;
            border: 1px solid lightblue;
        }
        .nav-link:hover{
            border: 1px solid black;
            border-radius: 5px;
            background-color: whitesmoke;
        }
        /*标签盒子*/
        .main{
            width: 820px;
            height: 400px;
            border-radius: 10px;
            border: 2px solid white;
            overflow-y: scroll;
            overflow-x:hidden;
            margin: 90px 160px;
        }
        .labelBox{
            width: 780px;
            height: 120px;
            margin:10px auto;
            border-radius: 5px;
            border: 1px solid white;
        }
        /*标签内头像*/
        .avater{
            position: relative;
            width: 76px;
            height: 76px;
            left: 4px;
            top: 10px;
            border: 3px solid lightblue;
            border-radius: 100px;
        }
        /*标签内小标签*/
        .label{
            position: relative;
            width: 120px;
            height: 30px;
            top: 5px;
            left:120px;
            color: white;
            border-radius: 5px;
            background-color: lightblue;
        }
        /*标签内介绍框*/
        .label-little{
            position: relative;
            width: 596px;
            height: 80px;
            border: 1px solid white;
            border-radius: 5px;
            top: -66px;
            left: 90px;
        }
        .join{
            position: relative;
            width: 16px;
            height: 16px;
            top: -80px;
            left: 620px;
        }
        .lefPeople{
            position: relative;
            left: 603px;
            top: -40px;

        }
        /*侧边样式*/
        .sidebar-box {
            position: absolute;
            width: 14%;
            height: 500px;
            left: 6px;
            top: 20px
           
        }
        .user {
            height: 100px;
            width: 100px;
            margin-top: 5px;
            margin-left: 20px;
            border: 2px solid white;
            border-radius: 100px;
        }
        .nickName{
            position: relative;
            top: 5px;
            left: 36px;
            border-radius: 3px;
            border: 1px solid white;
        }
        .signature {
            position: relative;
            width: 96%;
            display: block;
            color: black;
            top: 10px;
            left: 5px;

        }
        .list-group{
            position: relative;
            width: 100%;
            height: 246px;
            top: 44px;
            left: 10px;
            background-color: whitesmoke;
            border-radius: 5px;
        }
         .list-group .list-group-item{
             text-decoration: none;
             display: block;
             position: relative;
             width: 138px;
             height: 42px;
             line-height: 36px;
             text-align: center;
             font-size: 20px;
             color: black;
        }
         .list-group-item:hover{
             background-color:lightcyan;
         }
        .list-line {
            position: relative;
            width: 134px;
            height: 1px;
            background-color: white;
        }
      /*发布框*/
        .public-box{
            position: relative;
            width: 200px;
            height: 400px;
            top: 90px;
            left: 1154px;
            border-radius: 10px;
            border: 1px solid white;
        }
        .public-head{
            width: 100%;
            height: 12%;
        }
        .phead-1{
            width: 100px;
            margin: 8px 8px;
            color: black;
        }
        .phead-2 {
            width: 80px;
            margin: 8px 0;
            color:white;
        }
        .phead-3{
            position: relative;
            width: 140px;
            left: 40px;
            top: -20px;
            color: #d5d5d5;
        }

        .phead-4{
            width: 80px;
            margin: 6px 0 0 0;
            color:white;
        }
        .btn-1{
            width: 60px;
            height: 30px;
            color: black;
            margin-top: 310px;
            margin-left: 120px;
            background-color:lightblue;
            border-radius: 5px;
        }
        /*滚动条样式*/
        /*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/
        ::-webkit-scrollbar
        {
            width: 10px;
            border-radius: 6px;
            background-color: #fff;
        }

        /*定义滚动条轨道 内阴影+圆角*/
        ::-webkit-scrollbar-track
        {
            border-radius: 10px;
            background-color:transparent ;
        }

        /*定义滑块 内阴影+圆角*/
        ::-webkit-scrollbar-thumb
        {
            border-radius: 10px;
            background-color: lightblue;
        }
        /*定义最上方和最下方的按钮*/
        ::-webkit-scrollbar-button{
            border-radius: 10px;
            background-color: transparent;
        }
    </style>
    </head>
    <body>
    <!-- Header content area -->
    <div class="heaBac">
     <div>
      <h1 style="color: white;margin-left: 100px">supater 学 习 交 友 社 区</h1>
     </div>
    </div>
        <!-- Main content area -->
     <div class="mainBox">
            <!-- Main navigation -->
            <div class="MainNavigation">
            <ul>
                <li>
                    <a class="nav-link" href="#">首页信息</a>
                    <a class="nav-link" href="#">组队学习</a>
                    <a class="nav-link" href="#">吃喝玩乐</a>
                <a class="nav-link" href="#">课程讲座</a>
                <a class="nav-link" href="home.html">个人中心</a>
                </li>
            </ul>
            </div>
            <!-- Main content -->
                <div class="col-sm-8">
                    <div class="main">
                    </div>
                <!-- Sidebar -->
                    <div class="sidebar-box">
                        <img class="user" src="images/tx01.jpg">   <br>
                        <span id="aa" class="nickName"></span>
                        <span class="signature">  不学好英语不改签名</span>
                        <div class="list-group">
                            <a class="list-group-item" href="#">发布组队</a>
                            <div class="list-line"></div>
                            <a class="list-group-item" href="#">我的组队</a>
                            <div class="list-line"></div>
                            <a class="list-group-item" href="#">个人信息</a>
                            <div class="list-line"></div>
                            <a class="list-group-item" href="#">进入聊天</a>
                            <div class="list-line"></div>
                            <a class="list-group-item" href="#">个人信息</a>
                            <div class="list-line"></div>
                            <a class="list-group-item" href="#">了解更多</a>
                    </div>
                    </div>
                </div>
        </div>
<!--    public content area-->
    <div class="public-box">
                <div class="public-head" >
                    <p class="phead-1" >发布组队信息</p>
                    <p class="phead-2" >标题: <input id="actionName" class="phead-3" placeholder="请输入"/>  </p>
                    <p class="phead-4" >模式: <select id="type" class="phead-3" property="请选择标签">
                        <option style="color: #d5d5d5" value="1">线下学习</option>
                        <option value="2">线上学习</option>
                    </select> </p>
                    <p class="phead-4" >标签: <select id="label" class="phead-3" property="请选择标签">
                        <option style="color: #d5d5d5" value="考研冲刺">考研冲刺</option>
                        <option value="期末复习">期末复习</option>
                    </select>  </p>
                    <p class="phead-4" >人数: <select id="maxMember" class="phead-3" property="请选择标签">
                        <option style="color: #d5d5d5" value="2">最多2人</option>
                        <option value="3">最多3人</option>
                        <option value="4">最多4人</option>
                        <option value="5">最多5人</option>
                    </select>  </p>
                    <p class="phead-4" >时间:<input id="time" class="phead-3" placeholder="请输入"/> </p>
                    <p class="phead-4" >地点: <input id="site" class="phead-3" placeholder="请输入"/> </p>
                    <p class="phead-4" >备注: <input id="ps" class="phead-3" placeholder="请输入"/> </p>

                </div>
        <button class="btn-1">发布</button>
    </div>
    </body>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.cookie.js"></script>
    <script type="text/javascript">

        $(document).ready(function(){
            function setCookie(cname,cvalue) {
                var d=new Date();
                d.setTime(d.getTime()+7*24*60*60*1000);
                var expires="expires="+d.toGMTString();
                document.cookie=cname+"="+cvalue+";"+expires;
            }
            function getCookie(cname){
                var name=cname+"=";
                var ca=document.cookie.split(';');
                for (var i=0;i<ca.length;i++){
                    var c=ca[i].trim();
                    if(c.indexOf(name)==0){
                        return c.substring(name.length,c.length);
                    }
                }
            }
            //滚动条方法
            $("#main").scroll(200);
            //掉用后台接口
            function init(){
                var test = getCookie("uname");
                $('#aa').html(test);
                var user = {
                    username: test,
                };
                //显示个人信息
                $.ajax({
                    type: "GET",
                    url: "http://localhost:8888/userInfo/getUserInfo", //这里写接口地址，
                    contentType:"application/json",
                    data: user, //调用时的参数
                    dataType: "json",//返回json
                    success: function(data){//成功
                        $('.signature').html(data.personalizedSignature);
                    }
                });
                //显示全部组队信息
                $.ajax({
                    type: "GET",
                    url: "http://localhost:8888/studyInfo/getStudyInfo", //这里写接口地址，
                    data: user, //调用时的参数
                    dataType: "json",//返回json
                    success: function(data){//成功
                        console.log(data);
                        var str = "";//定义用于拼接的字符串
                        for (var i = 0; i < data.length; i++) {
                            //拼接表格的行和列
                            str = "<div class='labelBox' > <span class='label'>" +data[i].label + "</span><div><img class='avater' src=images/tx.jpg/></div><div class='label-little'><p>" + '组队标题：'+data[i].actionName + "</p> <span >"+ '发起人：' + data[i].username + "</span> <span >" + '&nbsp;||&nbsp;所在学校：'+ data[i].userSchool + "</span><span >" + '&nbsp;||&nbsp;学习时间：'+ data[i].time + "</span><span >"+ '&nbsp;||&nbsp;学习地点：' + data[i].site + "</span><span>" + '&nbsp;||&nbsp;人数：'+ data[i].maxMember + "</span> <p>"+ '备注：' + data[i].ps + "</p> <div class='join'><img  src=images/join.png/></div><p class='lefPeople'>剩余人数3/5</p></div></div>";
                            //追加到table中
                            $(".main").append(str);
                        }
                    }
                });

            };
            init();    // 调用
            //主页面取值
            $(function(){
                //发布组队信息
                $(".btn-1").click(function(){
                    const actionName = $("#actionName").val();
                    const label = $("#label").val();
                    const maxMember = $("#maxMember").val();
                    const ps = $("#ps").val();
                    const site = $("#site").val();
                    const time = $("#time").val();
                    const type = $("#type").val();
                    const userSchool = $("#userSchool").val();
                    //请求参数
                    const StudyInfo = {
                        username: "root",
                        userSchool: "湖北大学",
                        actionName: actionName,
                        type: type,
                        label: label,
                        time:time,
                        site: site,
                        maxMember: 0,
                        leftSize: -1,
                        date: "2019-12-27",
                        ps: ps,
                        valid: 1
                    };
                    $.ajax({
                        type: "PUT",
                        dataType: 'json',
                        contentType: "application/json",//返回json
                        url: "http://localhost:8888/studyInfo/insert", //这里写接口地址，
                        data: JSON.stringify(StudyInfo),
                        success: function(data){//成功
                            // console.log(data);
                        },
                        //请求失败，包含具体的错误信息
                        error: function (e) {
                           console.log(e.status);
                            console.log(e.responseText);
                        }
                    });
                });
            });
         });
    </script>
</html>