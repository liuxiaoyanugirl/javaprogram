<!doctype html>
<html lang="en">
	<head>
        <meta charset="utf-8">
        <link rel ="stylesheet" href="css/bootstrap.css" >
<!-- Main CSS -->
    <style>
        body{
            background: url("images/dahai2.png") no-repeat;
        }
        *{
            padding: 0;
            margin: 0;
        }
        /*标题样式*/
        .heaBac{
            width: 62%;
            height: 180px;
            margin: auto;
            background: url("images/dahai1.png") no-repeat;
        }
        /*主盒子*/
        .mainBox {
            position: absolute;
            width:62%;
            top: 200px;
            left: 260px;
            height: 600px;
            background-color: #F8F8F8;
        }
        /*主导航*/
        .headBox{
            position: relative;
            width:100%;
            height: 110px;
            background-color: #E8E8E8;
        }
        .avater{
            position: relative;
            width: 140px;
            height: 140px;
            top: -40px;
            left: 20px;
            border: 4px solid lightskyblue;
            border-radius: 5px;
        }
        .text{
            position: relative;
            width: 300px;
            height: 100px;
            top: -140px;
            left: 180px;
        }
        .sideBox{
            position: relative;
            width: 20%;
            height:70%;
            top: 10px;
            list-style: none;
            background-color: #E8E8E8;
        }
        ul li{
            width: 100%;
            height: 50px;
            line-height: 50px;
            text-align: center;
            color:black;
            font-size: 20px;
        }
        ul li:hover{
            background-color: whitesmoke;
        }
        img{
            position: relative;
            top: 9px;
            left: -5px;
        }
        /*按钮盒子及样式*/
        .btn{
            position: relative;
            left: 300px;
            top: -40px;
            background-color: #9acfea;
        }
        /*内容盒子*/
        .publicBox{
            position: relative;
            width: 670px;
            height: 440px;
            left: 180px;
            top: -50px;
            background-color: whitesmoke;
        }
        .joinBox{
            position: relative;
            width: 670px;
            height: 440px;
            left: 180px;
            top: -50px;
            background-color:  whitesmoke;
        }
        .table{
            position: relative;
            top: -60px;
        }
        /*翻页样式*/
        #pageStyle{
            display:inline-block;
            width:32px;
            height:32px;
            border:1px solid #CCC;
            line-height:32px;
            text-align:center;
            color:#999;
            margin-top:20px;
            text-decoration:none;

        }
        #pageStyle:hover{
            background-color:#CCC;
        }
        #pageStyle .active{
            background-color:#0CF;
            color:#ffffff;
        }
    </style>
    </head>
    <body>
    <!-- Header content area -->
    <div class="heaBac">
    </div>
        <!-- Main content area -->
     <div class="mainBox">
         <div class="headBox">
             <div >
                 <img class="avater" src="images/tx.jpg"/>
             </div>
             <div class="text">
                 <p id="un"></p>
                 <p>男</p>
                 <p id="lb"></p>
                 <span id="ct"></span> <span id="sc"></span> <span id="xy"></span> <span id="zy"></span>
                 <button class="btn">编辑资料</button>
             </div>
         </div>
         <div>
             <ul  class="sideBox">
                 <li  class="public">
                     <p>我的发布</p>
                 </li>
                 <li  class="join">
                     <p >我的参与</p>
                 </li>
             </ul>

             <div class="publicBox">
                 <table class="table">
                     <caption>我发布的帖子</caption>
                     <thead>
                     <tr>
                         <th>标题</th>
                         <th>类型</th>
                         <th>状态</th>
                         <th>操作</th>
                         <th>操作</th>
                     </tr>
                     </thead>
                     <tbody>
                     <tr class="warning">
                         <td id="1">产品2产品2产品2产品2产品2产品2</td>
                         <td>组对学习</td>
                         <td>申请中</td>
                         <td><button >查看</button></td>
                         <td><button >删除</button></td>
                     </tr>
                     <tr class="success">
                         <td id="2">产品2</td>
                         <td>10/11/2013</td>
                         <td>已成功</td>
                         <td><button >查看</button></td>
                         <td><button >删除</button></td>
                     </tr>
                     <tr  class="danger">
                         <td id="3">产品4</td>
                         <td>20/10/2013</td>
                         <td>已拒绝</td>
                         <td><button >查看</button></td>
                         <td><button >删除</button></td>
                     </tr>
                     <tr class="active">
                         <td id="4">产品2</td>
                         <td>10/11/2013</td>
                         <td>已结束</td>
                         <td><button >查看</button></td>
                         <td><button >删除</button></td>
                     </tr>
                     </tbody>
                 </table>
             </div>
             <div class="joinBox"> <table class="table">
                 <caption>我参与的帖子</caption>
                 <thead>
                 <tr>
                     <th>标题</th>
                     <th>类型</th>
                     <th>状态</th>
                     <th>操作</th>
                     <th>操作</th>
                 </tr>
                 </thead>
                 <tbody>
                 <tr class="warning">
                     <td>产品2产品2产品2产品2产品2产品2</td>
                     <td>组对学习</td>
                     <td>申请中</td>
                     <td><button >查看</button></td>
                     <td><button >删除</button></td>
                 </tr>
                 </tbody>
             </table></div>
         </div>

        </div>
   
    </body>
    <script src="jquery.min.js"></script>
    <script type="text/javascript">
        //翻页
        $(function(){
            var $table = $('table');
            var currentPage = 0;//当前页默认值为0
            var pageSize = 5;//每一页显示的数目
            $table.bind('paging',function(){
                $table.find('tbody tr').hide().slice(currentPage*pageSize,(currentPage+1)*pageSize).show();
            });
            var sumRows = $table.find('tbody tr').length;
            var sumPages = Math.ceil(sumRows/pageSize);//总页数

            var $pager = $('<div class="page"></div>');  //新建div，放入a标签,显示底部分页码
            for(var pageIndex = 0 ; pageIndex<sumPages ; pageIndex++){
                $('<a href="#" id="pageStyle" onclick="changCss(this)"><span>'+(pageIndex+1)+'</span></a>').bind("click",{"newPage":pageIndex},function(event){
                    currentPage = event.data["newPage"];
                    $table.trigger("paging");
                    //触发分页函数
                }).appendTo($pager);
                $pager.append(" ");
            }
            $pager.insertAfter($table);
            $table.trigger("paging");

            //默认第一页的a标签效果
            var $pagess = $('#pageStyle');
            $pagess[0].style.backgroundColor="#006B00";
            $pagess[0].style.color="#ffffff";
        });
        //a链接点击变色，再点回复原色
        function changCss(obj){
            var arr = document.getElementsByTagName("a");
            for(var i=0;i<arr.length;i++){
                if(obj===arr[i]){       //当前页样式
                    obj.style.backgroundColor="#006B00";
                    obj.style.color="#ffffff";
                }
                else
                {
                    arr[i].style.color="";
                    arr[i].style.backgroundColor="";
                }
            }
        }
        $(document).ready(function(){
            // 选择出现隐藏
            $(".joinBox").hide();
            $(".join").click(function(){
                $(".joinBox").show();
                $(".publicBox").hide();
            });
            $(".public").click(function(){
                $(".publicBox").show();
                $(".joinBox").hide();
            });
            function init() {
                //显示个人信息
                $.ajax({
                    type: "GET",
                    url: "http://localhost:8888/userInfo/getUserInfo?username=root", //这里写接口地址，
                    // data: {username:$("#username").val(), content:$("root").val()}, //调用时的参数
                    dataType: "json",//返回json
                    success: function (data) {//成功
                        console.log(data)
                        $('#un').html(data.username);
                        $('#lb').html(data.personalizedLabels);
                        $('#sc').html(data.school);
                        $('#xy').html(data.academy);
                        $('#zy').html(data.major);
                        $('#ct').html(data.city);
                    }
                });
                //显示全部个人组队信息
                $.ajax({
                    type: "GET",
                    url: "http://localhost:8888/studyInfo/getStudyInfoWithUserIssue?username=root&pageNum=1&pageSize=20", //这里写接口地址，
                    // data: {username:$("#username").val(), content:$("root").val()}, //调用时的参数
                    dataType: "json",//返回json
                    success: function(data){//成功
                        console.log(data);
                        $('#4').html(data.list[0].actionName );
                        $('#1').html(data.list[1].actionName);
                        $('#2').html(data.list[2].actionName);
                        $('#3').html(data.list[3].actionName);
                    }
                });
            }
                init();    // 调用

        });
    </script>
</html>